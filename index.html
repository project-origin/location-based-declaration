<!DOCTYPE html>
<html lang="da-DK" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deklaration, leveret el.</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">

  <style type="text/css">
    @media print {

      @page {
        size: A4;
      }

      body * {
        -webkit-print-color-adjust: exact;
      }

      th,
      td {
        font-size: 11px;
      }

      .group-together {
  break-inside: avoid;
}

      .table-responsive {
        max-height: none;
      }

      #section-not-to-print * {
        display: none;
      }
    }

    @media screen {

      .table-responsive {
        max-height: 200px;
      }
    }
  </style>

</head>

<body>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script src="https://unpkg.com/gauge-chart@latest/dist/bundle.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-piechart-outlabels"></script>
  <script src="script.js"></script>


  <div style="background: #4d8a8b;">
    <div class="container">
      <div class="p-3 rounded-lg">
        <img src="./images/logo.png">
      </div>
    </div>
  </div>

  <div class="container">
    <div class="bg-light p-5 rounded-lg m-3">

      <h1 class="display-4">Deklaration, leveret el. <span id="title-year"><span></h1>

      <div id="section-not-to-print">
        <p class="lead">De beregnede emissioner er baseret på timeforbruget og lokation for de viste målere, kombineret med Energinets områdeafhængige timedeklaration. De beregnede nøgletal per kWh er gennemsnitsværdier for perioden, og vil være
          individuelle for
          hver enkelt kunde. Jo større del af forbruget, der ligger i perioder med høj andel af VE, jo lavere vil emissionerne være per kWh.
          Bemærk:
        </p>
        <ul>
          <li class="lead">El-deklarationerne fra din elhandler er baseret på handel med certifikater, men de påvirker ikke hvad der leveres fra elnettet. Læs mere om de forskellige deklarationer på Energinets hjemmeside.</li>
          <li class="lead">Producerer du selv strøm, skal du selv indregne den del af forbrug og produktion, der ikke passerer elmåleren (egetforbrug).</li>
           <li class="lead">VE inkluderer vind, sol, vand, bioenergi og 55% affald. Se Energistyrelsens energistatistik 2019 <a href="https://ens.dk/sites/ens.dk/files/Statistik/energistatistik2019_dk-webtilg.pdf" target="_blank">her</a>.</li>
        </ul>
        <hr class="my-4">

        <p class="lead">Beregn din emission ved at indtaste din token fra eloverblik.dk (anskaffelse af token: <a href="./eloverblik_token_vejledning.pdf" target="_blank">Adgang til egne data via API-kald</a>):</p>
        <div class="input-group mb-3">
          <input type="text" class="form-control" id="input-token" placeholder="Token">
          <button class="btn btn-primary" id="button-calculate" type="button" onclick="computeDeclaration(this)" style="background: #4d8a8b; border: none;">Beregn</button>
        </div>

        <div class="pt-3">
          <h4 id="label-status"></h4>
        </div>
      </div>


      <div id="data-sector" hidden>



        <div class="pt-3">
          <h3>Forbrugsstamdata</h3>
        </div>

        <h5 class="pt-3">Deklarationen gælder:</h5>
        <div class="pt-3 table-responsive">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>CVR</th>
                <th>Navn</th>
              </tr>
            </thead>
            <tbody id="table-cvr-data"></tbody>
          </table>
        </div>

        <div id="section-not-to-print">

          <h5 class="pt-3">Deklarationen omfatter:</h5>

          <div class="pt-3 table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Målepunkt ID</th>
                  <th>Addresse</th>
                  <th>Postnummer</th>
                  <th>By</th>
                  <th>Inkluderet</th>
                </tr>
              </thead>
              <tbody id="table-mp-data"></tbody>
            </table>
          </div>

        </div>

        <div class="pt-3 group-together">
          <h3>Din grønne profil</h3>

          <div class="pt-3">
            <table class="table table-borderless text-center align-middle">
              <tr>
                <td class="h5">Vedvarende energi</td>
                <td class="h5">Total CO<sub>2</sub> udledning:</td>
                <td class="h5">Din timeprofil:</td>
              </tr>
              <tr>
                <td><span id="gauge-green-meter"></span></td>
                <td><strong><span class="h3" id="num-co2-total"></spand></strong><br /><br /><span class="h5" id="num-co2-relative"></span></td>
                <td><span id="gauge-indicator-meter"></span></td>
              </tr>
            </table>
          </div>
        </div>

        <div style="page-break-before:always">


          <div class="pt-3">
            <h3>Brændsler anvendt til elfremstilling</h3>
          </div>

          <div class="row pt-3 align-middle">
            <div class="col-12 col-md-7 align-middle">
              <canvas id="barChart" width="1000" height="1000"></canvas>
            </div>
            <div class="col-12 col-md-5 align-middle" style="page-break-after:always">
              <table class="table table-striped align-middle">
                <thead>
                  <tr>
                    <th></th>
                    <th class="text-center">Brændselstype</th>
                    <th class="text-center">Forbrug</th>
                    <th class="text-center">Procentvis</th>
                    <th class="text-center">Reference</th>
                  </tr>
                </thead>
                <tbody id="table-fuels"></tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="pt-3" style="page-break-before:always">

          <div class="pt-3">
            <h3>Hvor kommer din strøm fra?</h3>
          </div>

          <table class="table table-striped">
            <thead>
              <tr>
                <th></th>
                <th class="text-center">Brændselstype</th>
                <th class="text-center">Vestdanmark</th>
                <th class="text-center">Østdanmark</th>
                <th class="text-center">Tyskland</th>
                <th class="text-center">Norge</th>
                <th class="text-center">Sverige</th>
                <th class="text-center">Holland</th>
                <th class="text-center">Procentvis</th>
              </tr>
            </thead>
            <tbody id="table-from-production"></tbody>
          </table>
        </div>

        <div class="pt-3" style="page-break-before:always">

          <div class="pt-3">
            <h3>Miljøforhold for el leveret til forbrug</h3>
          </div>

          <table class="table table-striped" id="table-emission-data">
            <thead>
              <tr>
                <th>Ved forbrug af 1 kWh fremkommer</th>
                <th>Individuel deklaration</th>
                <th>Reference</th>
              </tr>
            </thead>
            <tbody id="table-emissions"></tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</body>

</html>
